<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0" />
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>

    <title>Vue App</title>
  </head>

  <body>
    <div id="app">
        <h1>JOKES</h1>
        <p>
            <ol>
                <li>{{jsonObject.setup}}</li>
                <li><b>{{jsonObject.punchline}}</b></li>
            </ol>
        </p>
    </div>

    <script>
      const App = new Vue({
        el: '#app',
        data: {
          message: 'Hello Vue!',
          jsonObject: {}
        },
        methods: {
            loadJSON(callback) {

                var xobj = new XMLHttpRequest();
                xobj.overrideMimeType("application/json");
                xobj.open('GET', 'https://official-joke-api.appspot.com/random_joke', true)
                xobj.onreadystatechange = function () {
                    if (xobj.readyState == 4 && xobj.status == "200") {
                        // Required use of an anonymous callback as .open will NOT return a value but simply returns undefined in asynchronous mode
                        callback(xobj.responseText);
                    }
                };
                xobj.send(null);
            },
            init() {
                let that = this
                that.loadJSON(function (response) {
                    // Parse JSON string into object
                    var data = JSON.parse(response);
                    that.jsonObject = data
                });
            }
        },
        mounted(){
            this.init()
        }
      })
    </script>
  </body>
</html>